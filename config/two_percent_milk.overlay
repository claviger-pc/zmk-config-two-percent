// SPDX-License-Identifier: MIT
// Two Percent Milk — direct-pin + Studio-ready physical layout
#include <zephyr/dt-bindings/gpio/gpio.h>
#include <dt-bindings/zmk/matrix_transform.h>

/ {
    /* --- DIRECT-PIN KSCAN ---------------------------------------------- */
    kscan0: kscan_0 {
        compatible = "zmk,kscan-gpio-direct";
        /* TODO: Replace these with your actual pins, one per key.
         * For nice_nano_v2 (nRF52840) use &gpio0 or &gpio1 and the port pin number.
         * Standard wiring: GPIO_ACTIVE_LOW | GPIO_PULL_UP
         */
        input-gpios = <
            /* &gpio0  2 (GPIO_ACTIVE_LOW | GPIO_PULL_UP) */
            /* &gpio0  3 (GPIO_ACTIVE_LOW | GPIO_PULL_UP) */
            /* ... one entry per switch ...               */
        >;
    };

    /* --- 1×N MATRIX TRANSFORM ------------------------------------------ */
    matrix_transform0: keymap_transform_0 {
        compatible = "zmk,matrix-transform";
        rows = <1>;
        columns = <NUMBER_OF_KEYS>;                 /* TODO: set to key count */
        /* For direct-pin: each pin is “column k” → RC(0, k). Expand to N. */
        map = <
            RC(0, 0) RC(0, 1) RC(0, 2) RC(0, 3)
            /* RC(0, 4) ... RC(0, N-1) */
        >;
    };

    /* --- PHYSICAL LAYOUT (Studio) -------------------------------------- */
    physical_layout0: physical_layout_0 {
        compatible = "zmk,physical-layout";
        display-name = "Two Percent Milk (direct)";
        kscan = <&kscan0>;
        transform = <&matrix_transform0>;

        /* Optional but recommended: add key rectangles for Studio UI.
         * If you don’t add 'keys', Studio still works but shows a generic grid. */
        // #include <physical_layouts.dtsi>
        // keys = < ZMK_KEY(x_mm, y_mm, w_mm, h_mm) ... >;
    };

    /* Select the physical layout for Studio */
    chosen { zmk,physical-layout = &physical_layout0; }
};
